# ğŸ¾ PawScript å…¥é—¨æŒ‡å—

æ¬¢è¿ä½¿ç”¨ **PawScript** â€”â€” ä¸€ç§â€œå¯çˆ±åˆå®ç”¨â€çš„é™æ€ç±»å‹å‡½æ•°å¼è„šæœ¬è¯­è¨€ã€‚æœ¬è¯´æ˜è¦†ç›– v0.1 ç‰ˆçš„å…¨éƒ¨è¯­æ³•ï¼ŒåŒ…æ‹¬ **è®°å½•ï¼ˆRecord/ç»“æ„ä½“ï¼‰**ã€**å¯é€‰ç±»å‹**ã€**å¼‚æ­¥/ç­‰å¾…**ã€**é”™è¯¯å¤„ç†**ã€**æ¨¡å—å¯¼å…¥** ç­‰ã€‚

---

## ç›®å½•

1. [å®‰è£…ä¸è¿è¡Œ](#å®‰è£…ä¸è¿è¡Œ)  
2. [CLI æ ˆå¤§å°å‚æ•°](#cli-æ ˆå¤§å°å‚æ•°)  
3. [æ ¸å¿ƒç»“æ„](#æ ¸å¿ƒç»“æ„)  
4. [æ•°æ®ç±»å‹](#æ•°æ®ç±»å‹)  
5. [å¯é€‰ç±»å‹ & ç©ºå€¼](#å¯é€‰ç±»å‹--ç©ºå€¼)  
6. [å˜é‡å£°æ˜](#å˜é‡å£°æ˜)  
7. [è¡¨è¾¾å¼](#è¡¨è¾¾å¼)  
8. [è¯­å¥](#è¯­å¥)  
9. [æ§åˆ¶æµ](#æ§åˆ¶æµ)  
10. [å‡½æ•°](#å‡½æ•°)  
11. [å¼‚æ­¥ç¼–ç¨‹](#å¼‚æ­¥ç¼–ç¨‹)  
12. [æ•°ç»„](#æ•°ç»„)  
13. [è®°å½•ï¼ˆstructï¼‰](#è®°å½•struct)  
14. [ç±»å‹è½¬æ¢](#ç±»å‹è½¬æ¢)  
15. [æ³¨é‡Š](#æ³¨é‡Š)  
16. [é”™è¯¯å¤„ç†](#é”™è¯¯å¤„ç†)  
17. [æ¨¡å—å¯¼å…¥](#æ¨¡å—å¯¼å…¥)  
18. [å®Œæ•´ç¤ºä¾‹](#å®Œæ•´ç¤ºä¾‹)  

---

## å®‰è£…ä¸è¿è¡Œ

1. å…‹éš†å¹¶ç¼–è¯‘ï¼š

```bash
   git clone https://github.com/KinLeoapple/pawc.git
   cd pawc
   cargo build --release
````

2. è¿è¡Œè„šæœ¬ï¼š

```bash
   target/release/pawc hello.paw
   ```

---

## CLI æ ˆå¤§å°å‚æ•°

PawScript è§£é‡Šå™¨æ”¯æŒé€šè¿‡å‘½ä»¤è¡Œå‚æ•°ï¼ˆMiB ä¸ºå•ä½ï¼‰è°ƒæ•´æ ˆå¤§å°ï¼Œä»¥åº”å¯¹æ·±åº¦é€’å½’åœºæ™¯ã€‚

```bash
# é»˜è®¤ï¼šä¸»çº¿ç¨‹å¤‡ç”¨æ ˆ 1MiBï¼ŒTokio worker çº¿ç¨‹æ ˆ 1MiB
target/release/pawc script.paw

# è‡ªå®šä¹‰ï¼šä¸»çº¿ç¨‹å¤‡ç”¨æ ˆ 4MiBï¼Œworker çº¿ç¨‹æ ˆ 2MiB
target/release/pawc --stack-size 4 --worker-stack-size 2 script.paw
```

* `--stack-size <MiB>`ï¼šå½“ä¸»çº¿ç¨‹å‰©ä½™æ ˆ <32KiB æ—¶ï¼Œæ‰©å®¹åˆ°æ­¤å¤§å°ï¼ˆé»˜è®¤ **1**ï¼‰ã€‚
* `--worker-stack-size <MiB>`ï¼šTokio worker çº¿ç¨‹çš„æ ˆå¤§å°ï¼ˆé»˜è®¤ **1**ï¼‰ã€‚

---

## æ ¸å¿ƒç»“æ„

ä¸€ä¸ª PawScript ç¨‹åºç”±æŒ‰é¡ºåºæ‰§è¡Œçš„è¯­å¥å’Œå‡½æ•°å£°æ˜ç»„æˆã€‚

---

## æ•°æ®ç±»å‹

* **åŸå§‹ç±»å‹**ï¼š`Int`, `Long`, `Float`, `Double`, `Bool`, `Char`, `String`
* **æ³›å‹**ï¼š`Array<T>`
* **ç‰¹æ®Šç±»å‹**ï¼š`Any`ï¼ˆåŠ¨æ€ç±»å‹ï¼‰ã€`Optional<T>`ï¼ˆå¯ç©ºç±»å‹ï¼Œå¯å†™ä½œ `T?`ï¼‰

---

## å¯é€‰ç±»å‹ & ç©ºå€¼

PawScript æ”¯æŒå¯é€‰ç±»å‹æ¥è¡¨ç¤ºå¯èƒ½ç¼ºå¤±çš„å€¼ã€‚

* åœ¨ç±»å‹ååŠ  `?` å£°æ˜å¯é€‰ç±»å‹ï¼Œä¾‹å¦‚ `Int?` ç­‰åŒäº `Optional<Int>`ã€‚
* ç©ºå€¼å­—é¢é‡ä¸º `nopaw`ã€‚
* å°† `nopaw` èµ‹ç»™éå¯é€‰ç±»å‹ä¼šæŠ¥ç¼–è¯‘é”™è¯¯ã€‚
* ç¤ºä¾‹ï¼š

  ```paw
  let maybeNum: Int? = nopaw
  if maybeNum == nopaw {
    say "æœªæä¾›æ•°å­—"
  }
  ```

---

## å˜é‡å£°æ˜

```paw
let x: Int = 10
let y: Int? = nopaw    # å¯é€‰ç±»å‹
x = x + 1               # é‡æ–°èµ‹å€¼
```

---

## è¡¨è¾¾å¼

* ç®—æœ¯ï¼š`+ - * / %`
* æ¯”è¾ƒï¼š`== != < <= > >=`
* é€»è¾‘ï¼š`&& || !`
* å­—ç¬¦ä¸²æ‹¼æ¥ï¼š`"Hi " + name + "!"`
* ç­‰å¾…ï¼š`await <asyncCall>`
* åˆ†ç»„ï¼š`(a + b) * c`

---

## è¯­å¥

* å£°æ˜/èµ‹å€¼ï¼š`let` / `=`
* è¾“å‡ºï¼š`say <expr>`
* è¾“å…¥ï¼š`ask "prompt"` æˆ– `let x: String â† ask "?"`
* è¿”å›ï¼š`return <expr>` æˆ– `return`

---

## æ§åˆ¶æµ

```paw
if cond {
  â€¦
} else if cond2 {
  â€¦
} else {
  â€¦
}

loop forever { â€¦ }
loop cond { â€¦ }
loop i in start..end { â€¦ }
loop item in array { â€¦ }
```

* `break` è·³å‡ºæœ€è¿‘çš„å¾ªç¯ã€‚
* `continue` è·³åˆ°ä¸‹ä¸€æ¬¡è¿­ä»£ã€‚

---

## å‡½æ•°

```paw
fun add(a: Int, b: Int): Int {
  return a + b
}
let result: Int = add(1, 2)
```

---

## å¼‚æ­¥ç¼–ç¨‹

PawScript æ”¯æŒå®šä¹‰å¼‚æ­¥å‡½æ•°å¹¶ç­‰å¾…å…¶ç»“æœï¼Œå®ç°éé˜»å¡ I/O å’Œå¹¶å‘ä»»åŠ¡ã€‚

### Async å‡½æ•°

åœ¨å‡½æ•°ç­¾åå‰åŠ  `async` å…³é”®å­—ï¼š

```paw
async fun fetchData(url: String): String {
  bark "ç½‘ç»œæœªå®ç°"
  return "data"
}
```

* `async` å¿…é¡»å†™åœ¨ `fun` ä¹‹å‰ã€‚
* å¼‚æ­¥å‡½æ•°å†…éƒ¨è¿”å› `Future<T>`ã€‚
* å¯å°†å¼‚æ­¥å‡½æ•°å½“å€¼å­˜å‚¨æˆ–ä¼ é€’ã€‚

### Await

ä½¿ç”¨ `await` ç­‰å¾… `Future` å®Œæˆï¼š

```paw
let content: String = await fetchData("http://example.com/data")
say "æ”¶åˆ°å†…å®¹ï¼š" + content
```

* `await` åªèƒ½åœ¨å¼‚æ­¥å‡½æ•°æˆ–é¡¶å±‚è„šæœ¬ä¸­ä½¿ç”¨ã€‚
* å¯¹é `Future` å€¼ä½¿ç”¨ `await` ä¼šåŸæ ·è¿”å›è¯¥å€¼ã€‚

### ä¸ä½¿ç”¨ Await è°ƒç”¨ Async

è°ƒç”¨å¼‚æ­¥å‡½æ•°ä½†ä¸ `await`ï¼Œä¼šå¾—åˆ° `Future` å¯¹è±¡ï¼š

```paw
let fut = fetchData("http://example.com")
say "å¾—åˆ° futureï¼š" + fut   # æ‰“å° Future å ä½
```

* å¯å°†è¯¥ Future å­˜å‚¨æˆ–ç¨åå†ç­‰å¾…ã€‚

---

## æ•°ç»„

```paw
let a: Array<Int> = [1, 2, 3]
say a[0]        # ç´¢å¼•è®¿é—®
say a.length()    # é•¿åº¦å±æ€§
```

---

## è®°å½•ï¼ˆstructï¼‰

PawScript æ”¯æŒç”¨æˆ·å®šä¹‰çš„å¤åˆæ•°æ®ç±»å‹ **Record**ï¼ˆç»“æ„ä½“ï¼‰ã€‚

### å®šä¹‰

ä½¿ç”¨ `record` å…³é”®å­—ï¼š

```paw
record Point {
  x: Int
  y: Int
}
```

* `Point` åŒ…å«ä¸¤ä¸ªå­—æ®µï¼š`x: Int` å’Œ `y: Int`ã€‚
* å­—æ®µåå’Œç±»å‹åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥ã€‚

### åˆå§‹åŒ–

æŒ‰å­—æ®µåæä¾›åˆå§‹å€¼ï¼š

```paw
let p: Point = Point { y: 4, x: 3 }
```

* å­—æ®µé¡ºåºå¯ä»»æ„ï¼Œä½†å¿…é¡»æä¾›æ‰€æœ‰å­—æ®µã€‚

### è®¿é—®å­—æ®µ

ä½¿ç”¨ç‚¹è¯­æ³•ï¼š

```paw
say p.x       # 3
say p.y       # 4
```

---

## ç±»å‹è½¬æ¢

ä½¿ç”¨ `as` æ˜¾å¼è½¬æ¢ï¼š

```paw
let i: Int = 3
let f: Float = i as Float
say f + 1.5
```

* æ”¯æŒ `Int â†” Long â†” Float â†” Double`ã€‚
* æ— æ•ˆè½¬æ¢ä¸ºç¼–è¯‘é”™è¯¯ã€‚

---

## æ³¨é‡Š

```paw
# å•è¡Œæ³¨é‡Š
let x: Int = 5   # è¡Œå°¾æ³¨é‡Š
```

---

## é”™è¯¯å¤„ç†

| å…³é”®å­—      | ç”¨é€”        |
| -------- | --------- |
| `bark`   | æŠ›å‡ºé”™è¯¯      |
| `sniff`  | try å—     |
| `snatch` | catch å—   |
| `lastly` | finally å— |

```paw
sniff {
  â€¦
} snatch (e) {
  say "æ•è·åˆ°ï¼š" + e
} lastly {
  say "æ¸…ç†å·¥ä½œ"
}
```

---

## æ¨¡å—å¯¼å…¥

```paw
import utils.math       # ç»‘å®šæ¨¡å—åˆ° `math`
import utils.math as m  # ç»‘å®šæ¨¡å—åˆ°åˆ«å `m`
```

* é€šè¿‡æ¨¡å—åæˆ–åˆ«åè®¿é—®å…¶å‡½æ•°å’Œå¸¸é‡ã€‚

---

## å®Œæ•´ç¤ºä¾‹

```paw
import utils.math as m
import string

say "=== Record & Async æµ‹è¯• ==="

// Record ç¤ºä¾‹
record Point { x: Int, y: Int }
let p: Point = Point { y: 4, x: 3 }
say "p.x + p.y = " + (p.x + p.y)

// Async ç¤ºä¾‹
async fun fetchData(url: String): String {
  bark "ç½‘ç»œæœªå®ç°"
}
let result: String = await fetchData("http://example.com")

// å¸¦ break/continue çš„å¾ªç¯
let sum: Int = 0
loop i in 1..10 {
  if i == 5 {
    continue
  }
  if i == 8 {
    break
  }
  sum = sum + i
}
say "sum = " + sum
```

ç¥æ‚¨åœ¨ PawScript ä¸­ç¼–ç æ„‰å¿« â€” å¯çˆ±åˆå¼ºå¤§ï¼

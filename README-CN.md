# ğŸ¾ PawScript å…¥é—¨æŒ‡å—

æ¬¢è¿ä½¿ç”¨ **PawScript** â€”â€” ä¸€ç§â€œå¯çˆ±åˆå®ç”¨â€çš„é™æ€ç±»å‹å‡½æ•°å¼è„šæœ¬è¯­è¨€ã€‚æœ¬æŒ‡å—è¦†ç›– v0.1 ç‰ˆæ‰€æœ‰è¯­æ³•ï¼ŒåŒ…æ‹¬ **è®°å½•ï¼ˆRecord/ç»“æ„ä½“ï¼‰**ã€**å¯é€‰ç±»å‹**ã€**å¼‚æ­¥/ç­‰å¾…**ã€**é”™è¯¯å¤„ç†**ã€**æ¨¡å—å¯¼å…¥** ç­‰ã€‚

---

## ç›®å½•

1. [å®‰è£…ä¸è¿è¡Œ](#å®‰è£…ä¸è¿è¡Œ)
2. [æ ¸å¿ƒç»“æ„](#æ ¸å¿ƒç»“æ„)
3. [æ•°æ®ç±»å‹](#æ•°æ®ç±»å‹)
4. [å¯é€‰ç±»å‹ä¸ Null](#å¯é€‰ç±»å‹ä¸-null)
5. [å˜é‡å£°æ˜](#å˜é‡å£°æ˜)
6. [è¡¨è¾¾å¼](#è¡¨è¾¾å¼)
7. [è¯­å¥](#è¯­å¥)
8. [æ§åˆ¶æµ](#æ§åˆ¶æµ)
9. [å‡½æ•°](#å‡½æ•°)
10. [å¼‚æ­¥ç¼–ç¨‹](#å¼‚æ­¥ç¼–ç¨‹)
11. [æ•°ç»„](#æ•°ç»„)
12. [è®°å½•ï¼ˆRecord/ç»“æ„ä½“ï¼‰](#è®°å½•recordç»“æ„ä½“)
13. [ç±»å‹è½¬æ¢](#ç±»å‹è½¬æ¢)
14. [æ³¨é‡Š](#æ³¨é‡Š)
15. [é”™è¯¯å¤„ç†](#é”™è¯¯å¤„ç†)
16. [æ¨¡å—å¯¼å…¥](#æ¨¡å—å¯¼å…¥)
17. [å®Œæ•´ç¤ºä¾‹](#å®Œæ•´ç¤ºä¾‹)

---

## å®‰è£…ä¸è¿è¡Œ

1. å…‹éš†å¹¶ç¼–è¯‘ï¼š

   ```bash
   git clone https://github.com/KinLeoapple/pawc.git
   cd pawc
   cargo build --release
   ```
2. è¿è¡Œè„šæœ¬ï¼š

   ```bash
   target/release/pawc hello.paw
   ```

---

## æ ¸å¿ƒç»“æ„

PawScript ç¨‹åºç”±æŒ‰é¡ºåºæ‰§è¡Œçš„è¯­å¥å’Œå‡½æ•°å£°æ˜ç»„æˆã€‚

---

## æ•°æ®ç±»å‹

* **åŸºæœ¬ç±»å‹**ï¼š`Int`ã€`Long`ã€`Float`ã€`Double`ã€`Bool`ã€`Char`ã€`String`
* **æ³›å‹ç±»å‹**ï¼š`Array<T>`
* **ç‰¹æ®Šç±»å‹**ï¼š`Any`ï¼ˆåŠ¨æ€ç±»å‹ï¼‰ã€`Optional<T>`ï¼ˆå¯ç©ºï¼Œå¯å†™ä½œ `T?`ï¼‰

---

## å¯é€‰ç±»å‹ä¸ Null

PawScript æ”¯æŒå¯é€‰ç±»å‹æ¥è¡¨ç¤ºå¯èƒ½ä¸å­˜åœ¨çš„å€¼ã€‚

* å¯é€‰ç±»å‹é€šè¿‡åœ¨ç±»å‹ååŠ  `?` å£°æ˜ï¼Œä¾‹å¦‚ `Int?` ç­‰ä»·äº `Optional<Int>`ã€‚
* ç©ºå€¼å­—é¢é‡ä¸º `nopaw`ã€‚
* å°† `nopaw` èµ‹ç»™éå¯é€‰ç±»å‹ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚

ç¤ºä¾‹ï¼š

```paw
let maybeNum: Int? = nopaw
if maybeNum == nopaw {
  say "æœªæä¾›æ•°å­—"
}
```

---

## å˜é‡å£°æ˜

```paw
let x: Int = 10       # å£°æ˜å¹¶åˆå§‹åŒ–
let y: Int? = nopaw   # å¯é€‰ç±»å‹
x = x + 1              # é‡æ–°èµ‹å€¼
```

---

## è¡¨è¾¾å¼

* ç®—æœ¯è¿ç®—ï¼š`+ - * / %`
* æ¯”è¾ƒè¿ç®—ï¼š`== != < <= > >=`
* é€»è¾‘è¿ç®—ï¼š`&& || !`
* å­—ç¬¦ä¸²æ‹¼æ¥ï¼š`"Hi " + name + "!"`
* ç­‰å¾…ç»“æœï¼š`await <asyncCall>`
* åˆ†ç»„ï¼š`(a + b) * c`

---

## è¯­å¥

* å£°æ˜/èµ‹å€¼ï¼š`let` / `=`
* è¾“å‡ºï¼š`say <expr>`
* è¾“å…¥ï¼š`ask "æç¤º"` æˆ– `let x: String <- ask "?"`
* è¿”å›ï¼š`return <expr>` æˆ– `return`

---

## æ§åˆ¶æµ

```paw
if cond {
  â€¦
} else if cond2 {
  â€¦
} else {
  â€¦
}

loop forever { â€¦ }
loop cond { â€¦ }
loop i in start..end { â€¦ }
```

* `break` è·³å‡ºæœ€è¿‘çš„å¾ªç¯ã€‚
* `continue` è·³è¿‡æœ¬æ¬¡è¿­ä»£ã€‚

---

## å‡½æ•°

```paw
fun add(a: Int, b: Int): Int {
  return a + b
}
let result: Int = add(1, 2)
```

---

## å¼‚æ­¥ç¼–ç¨‹

PawScript æ”¯æŒå®šä¹‰å¼‚æ­¥å‡½æ•°å¹¶ç­‰å¾…å…¶ç»“æœï¼Œå®ç°éé˜»å¡ I/O å’Œå¹¶å‘ä»»åŠ¡ã€‚

### å¼‚æ­¥å‡½æ•°

åœ¨ `fun` å‰æ·»åŠ  `async` å…³é”®å­—ï¼š

```paw
async fun fetchData(url: String): String {
  // ... å¼‚æ­¥æ“ä½œ ...
  bark "Fetched data from " + url
  return "data"
}
```

* `async` å¿…é¡»å†™åœ¨ `fun` å‰ã€‚
* å¼‚æ­¥å‡½æ•°å†…éƒ¨è¿”å›ç±»å‹è§†ä½œ `Future<T>`ã€‚
* å¯ä»¥å°†å¼‚æ­¥å‡½æ•°ä½œä¸ºå€¼ä¼ é€’æˆ–å­˜å‚¨ã€‚

### ç­‰å¾…ç»“æœ

ä½¿ç”¨ `await` æš‚åœæ‰§è¡Œç›´åˆ° `Future` å®Œæˆï¼š

```paw
let content: String = await fetchData("http://example.com/data")
say "æ”¶åˆ°: " + content
```

* `await` å¯åœ¨è„šæœ¬é¡¶å±‚æˆ–å¼‚æ­¥å‡½æ•°å†…ä½¿ç”¨ã€‚
* å¯¹é `Future` å€¼åº”ç”¨ `await` æ—¶ï¼Œç«‹å³è¿”å›è¯¥å€¼ã€‚
* åœ¨éå¼‚æ­¥ä¸Šä¸‹æ–‡ä½¿ç”¨ `await` ä¼šæŠ¥ç¼–è¯‘é”™è¯¯ã€‚

### ä¸ç­‰å¾…çš„è°ƒç”¨

ä¸ä½¿ç”¨ `await` è°ƒç”¨å¼‚æ­¥å‡½æ•°ä¼šè¿”å› `Future` å¯¹è±¡ï¼š

```paw
let fut = fetchData("http://example.com")
say "Future: " + fut
```

* å¯å°† `Future` å­˜å‚¨æˆ–ä¼ é€’ä»¥å¾…åç»­ `await`ã€‚

---

## æ•°ç»„

```paw
let a: Array<Int> = [1, 2, 3]
say a[0]      # ç´¢å¼•è®¿é—®
say a.length  # é•¿åº¦å±æ€§
```

---

## è®°å½•ï¼ˆRecord/ç»“æ„ä½“ï¼‰

PawScript æ”¯æŒ **Record**ï¼ˆç±»ä¼¼ç»“æ„ä½“ï¼‰å®šä¹‰å¤åˆæ•°æ®ã€‚

### å®šä¹‰

ä½¿ç”¨ `record` å…³é”®å­—ï¼š

```paw
record Point {
  x: Int
  y: Int
}
```

* `Point` ç±»å‹åŒ…å«å­—æ®µ `x` å’Œ `y`ã€‚

### åˆå§‹åŒ–

å­—æ®µåèµ‹å€¼ï¼š

```paw
let p: Point = Point { y: 4, x: 3 }
```

* å­—æ®µé¡ºåºå¯ä¸å®šä¹‰é¡ºåºä¸åŒï¼Œä½†å¿…é¡»æä¾›æ‰€æœ‰å­—æ®µã€‚

### å­—æ®µè®¿é—®

ç‚¹å¼è¯­æ³•ï¼š

```paw
say p.x  # 3
say p.y  # 4
```

---

## ç±»å‹è½¬æ¢

ä½¿ç”¨ `as` å…³é”®å­—ï¼š

```paw
let i: Int = 3
let f: Float = i as Float
say f + 1.5
```

* æ”¯æŒ `Int â†” Long â†” Float â†” Double` ä¹‹é—´è½¬æ¢ã€‚
* æ— æ•ˆè½¬æ¢ç¼–è¯‘æ—¶æŠ¥é”™ã€‚

---

## æ³¨é‡Š

```paw
# å•è¡Œæ³¨é‡Š
let x: Int = 5  # è¡Œå°¾æ³¨é‡Š
```

---

## é”™è¯¯å¤„ç†

| å…³é”®å­—      | ç”¨é€”        |
| -------- | --------- |
| `bark`   | æŠ›å‡ºé”™è¯¯      |
| `sniff`  | try å—     |
| `snatch` | catch å—   |
| `lastly` | finally å— |

```paw
sniff {
  â€¦
} snatch (e) {
  say "æ•è·é”™è¯¯: " + e
} lastly {
  say "æ¸…ç†å®Œæˆ"
}
```

---

## æ¨¡å—å¯¼å…¥

```paw
import utils.math       # ç»‘å®šä¸º math
import utils.math as m  # ç»‘å®šä¸º m
```

* ä¸å†™åˆ«åæ—¶ï¼Œæ¨¡å—åå–æœ€åä¸€æ®µè·¯å¾„ã€‚
* ä½¿ç”¨ `æ¨¡å—å.æˆå‘˜` è®¿é—®å‡½æ•°å’Œå¸¸é‡ã€‚

---

## å®Œæ•´ç¤ºä¾‹

```paw
import utils.math as m
import string

say "=== Record & Async ç¤ºä¾‹ ==="

// Record ç¤ºä¾‹\ nrecord Point { x: Int, y: Int }
let p: Point = Point { y: 4, x: 3 }
say "p.x + p.y = " + (p.x + p.y)

// Async ç¤ºä¾‹
async fun fetchData(url: String): String {
  bark "network not implemented"
}
let result: String = await fetchData("http://example.com")

// å¾ªç¯ç¤ºä¾‹
let sum: Int = 0
loop i in 1..10 {
  if i == 5 { continue }
  if i == 8 { break }
  sum = sum + i
}
say "sum = " + sum
```

ç¥æ‚¨åœ¨ PawScript ä¸­ç¼–ç¨‹æ„‰å¿«ï¼ â€”â€”Â å¯çˆ±è€Œå¼ºå¤§ï¼
